<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"><title>El patr√≥n Redux con NgRx en Angular | Academia Binaria</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Le pasa a todas las aplicaciones, crecen y crecen en funcionalidad y complejidad. En Angular estamos preparados para modularizar, componentizar e inyectar servicios. Pero con grandes aplicaciones, o c"><meta property="og:type" content="article"><meta property="og:title" content="El patr√≥n Redux con NgRx en Angular"><meta property="og:url" content="https://academia-binaria.com/el-patron-redux-con-ngrx-en-angular/index.html"><meta property="og:site_name" content="Academia Binaria"><meta property="og:description" content="Le pasa a todas las aplicaciones, crecen y crecen en funcionalidad y complejidad. En Angular estamos preparados para modularizar, componentizar e inyectar servicios. Pero con grandes aplicaciones, o c"><meta property="og:locale" content="es_ES"><meta property="og:image" content="https://academia-binaria.com/css/images/angular-15_ngrx.png"><meta property="article:published_time" content="2019-09-25T11:08:50.000Z"><meta property="article:modified_time" content="2019-10-16T14:23:01.024Z"><meta property="article:author" content="Alberto Basalo"><meta property="article:tag" content="Angular"><meta property="article:tag" content="Angular8"><meta property="article:tag" content="Tutorial"><meta property="article:tag" content="Avanzado"><meta property="article:tag" content="Redux"><meta property="article:tag" content="Angular2"><meta property="article:tag" content="NgRx"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://academia-binaria.com/css/images/angular-15_ngrx.png"><link rel="alternate" href="http://eepurl.com/b3p7fb" title="Academia Binaria" type="application/atom+xml"><link rel="icon" href="/css/images/favicon.ico"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/open-sans/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-66674029-1","auto"),ga("send","pageview")</script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-2476046955705301",enable_page_level_ads:!0})</script><meta name="generator" content="Hexo 4.2.0"></head></html><body><div id="container"><header id="header"><div id="header-main" class="header-inner"><div class="outer"><a href="/" id="logo"><i class="logo"></i> <span class="site-title">Academia Binaria</span></a><nav id="main-nav"><a class="main-nav-link" href="/cursos">Cursos Online</a></nav><nav id="sub-nav"><div class="profile" id="profile-nav"><a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/c6ea942080cef8be6ff80ca095e718b8"> <i class="fa fa-caret-down"></i></a></div></nav><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Buscar"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="escribe..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Entradas",PAGES:"P√°ginas",CATEGORIES:"Categorias",TAGS:"Etiquetas",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/cursos">Cursos Online</a></td><td><div class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Buscar"></div></td></tr></table></div></header><div class="outer"><aside id="profile"><div class="inner profile-inner"><div class="base-info profile-block"><img id="avatar" src="https://www.gravatar.com/avatar/c6ea942080cef8be6ff80ca095e718b8?s=128"><h2 id="name">Alberto Basalo</h2><h3 id="title">Formador y Consultor</h3><span id="location"><i class="fa fa-map-marker"></i>A Coru√±a, Spain</span> <a id="follow" target="_blank" href="https://twitter.com/albertobasalo">SEGUIR</a></div><div class="article-info profile-block"><a href="https://angular.builders" target="_blank" rel="noopener" style="align-content:center"><img src="/css/images/angular.builders_cuadrado.png" width="100%" height="auto" alt="Angular.Builders"></a></div><div class="profile-block social-links"><table><tr><td><a href="https://github.com/AcademiaBinaria" target="_blank" title="github" class="tooltip"><i class="fa fa-github"></i></a></td><td><a href="https://twitter.com/albertobasalo" target="_blank" title="twitter" class="tooltip"><i class="fa fa-twitter"></i></a></td><td><a href="https://www.facebook.com/Agora.Binaria.SL/" target="_blank" title="facebook" class="tooltip"><i class="fa fa-facebook"></i></a></td><td><a href="http://eepurl.com/b3p7fb" target="_blank" title="rss" class="tooltip"><i class="fa fa-rss"></i></a></td></tr></table></div></div></aside><section id="main"><article id="post-el-patron-redux-con-ngrx-en-angular" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">El patr√≥n Redux con NgRx en Angular</h1><div class="article-meta"><div class="article-date"><i class="fa fa-calendar"></i> <a href="/el-patron-redux-con-ngrx-en-angular/"><time datetime="2019-09-25T11:08:50.000Z" itemprop="datePublished">25-09-2019</time></a></div><div class="article-category"><i class="fa fa-folder"></i> <a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tag/Angular/" rel="tag">Angular</a>, <a class="tag-link" href="/tag/Angular2/" rel="tag">Angular2</a>, <a class="tag-link" href="/tag/Angular8/" rel="tag">Angular8</a>, <a class="tag-link" href="/tag/Avanzado/" rel="tag">Avanzado</a>, <a class="tag-link" href="/tag/NgRx/" rel="tag">NgRx</a>, <a class="tag-link" href="/tag/Redux/" rel="tag">Redux</a>, <a class="tag-link" href="/tag/Tutorial/" rel="tag">Tutorial</a></div></div></header><div class="article-entry" itemprop="articleBody"><p><a href="https://www.trainingit.es/curso-angular-basico/?promo=angular.builders" target="_blank" rel="noopener">Curso online de introducci√≥n a Angular. Cup√≥n descuento: üí∏-25‚Ç¨</a></p><p><a href="https://www.trainingit.es/curso-angular-avanzado/?promo=angular.builders" target="_blank" rel="noopener">Curso online avanzado con Angular. Cup√≥n descuento: üí∏-30‚Ç¨</a></p><p><img src="/images/tutorial-angular-15_ngrx.png" alt="el-patron-redux-con-ngrx-en-angular"></p><p>Le pasa a todas las aplicaciones, crecen y crecen en funcionalidad y complejidad. En Angular estamos preparados para modularizar, componentizar e inyectar servicios. Pero con grandes aplicaciones, o con grandes equipos, parece que nada es suficiente. Se necesita una <strong>gesti√≥n del estado centralizada</strong> como la del <a href="(../flujo-reactivo-unidireccional-con-Angular-y-RxJs/)">patr√≥n Redux</a>.</p><p>Si dec√≠amos que <strong>Redux no hace r√°pido lo simple, sino mantenible lo complejo</strong>, ahora te digo que <strong>NgRx no hace r√°pido a Redux, sino mantenible su boilerplate.</strong> As√≠ que si tienes delante un desarrollo funcionalmente complejo, te recomiendo que uses <em>NgRX</em>; la soluci√≥n est√°ndar para implementar <strong>Redux con Angular</strong>.</p><a id="more"></a><p>Partiendo del c√≥digo tal como qued√≥ en <a href="../flujo-reactivo-unidireccional-con-Angular-y-RxJs/">Redux, flujo reactivo unidireccional con Angular y RxJs</a>. Al finalizar tendr√°s una aplicaci√≥n que gestiona centralizadamente los cambios, que permite conocer qu√© ocurri√≥ y predecir lo que ocurrir√° usando NgRx.</p><blockquote><p>C√≥digo asociado a este tutorial en <em>GitHub</em>: <a href="https://github.com/AcademiaBinaria/angular-boss" target="_blank" rel="noopener">AcademiaBinaria/angular-boss</a></p></blockquote><h1 id="1-Instalacion-y-configuracion"><a href="#1-Instalacion-y-configuracion" class="headerlink" title="1 Instalaci√≥n y configuraci√≥n"></a>1 Instalaci√≥n y configuraci√≥n</h1><p><strong>NgRx</strong> es el est√°ndar de facto para implementar <em>Redux</em> en Angular. Est√° basada en <em>RxJS</em> y es una librer√≠a modular con todo lo necesario para crear grandes aplicaciones. Esto son los m√≥dulos que la componen:</p><ul><li><strong>store</strong>: Es el m√≥dulo principal con el administrador del estado centralizado y reactivo.</li><li><strong>store-devtools</strong>: Instrumentaci√≥n para depurar desde el navegador. Vale su peso en oro.</li><li><strong>router-Store</strong> : Almacena el estado del <em>router</em> de Angular en el <em>store</em>, tratando cada evento como una acci√≥n Redux.</li><li><strong>effects</strong>: Los reductores son funciones puras sin efectos colaterales. Este m√≥dulo es la soluci√≥n para comandos as√≠ncronos.</li><li><strong>schematics, entity, ngrx-data</strong>: Son otros m√≥dulos opcionales con ayudas y plantillas de NgRX.</li></ul><h2 id="1-1-Instalacion-de-NgRx"><a href="#1-1-Instalacion-de-NgRx" class="headerlink" title="1.1 Instalaci√≥n de NgRx"></a>1.1 Instalaci√≥n de NgRx</h2><p>Para agregar <em>NgRx</em> a un app te propongo que uses los <em>schematics</em> de NxDev pues disponen de m√°s opciones de configuraci√≥n inmediata. Aunque la alternativa con el CLI tambi√©n es suficiente para empezar.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> with Nx.dev tools</span></span><br><span class="line">ng g @nrwl/angular:ngrx app --module=apps/shop/src/app/app.module.ts --root --minimal</span><br><span class="line"><span class="meta">#</span><span class="bash"> with only CLI</span></span><br><span class="line">ng add @ngrx/store</span><br></pre></td></tr></table></figure><p>Con esto habr√°s instalado y configurado NgRx y tu <code>AppModule</code> tendr√° algo as√≠:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    CommonModule,</span><br><span class="line">    RouterModule,</span><br><span class="line">    StoreModule.forRoot(</span><br><span class="line">      &#123;&#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        metaReducers: !environment.production ? [] : [],</span><br><span class="line">        runtimeChecks: &#123;</span><br><span class="line">          strictActionImmutability: <span class="literal">true</span>,</span><br><span class="line">          strictStateImmutability: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ),</span><br><span class="line">    EffectsModule.forRoot([])</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppModule &#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>El c√≥digo generado por cualquiera de los dos schematics no es para todos los gustos. T√≥malo como un punto de partida y crea la estructura que mejor te encaje.</p></blockquote><h2 id="1-2-DevTools"><a href="#1-2-DevTools" class="headerlink" title="1.2 DevTools"></a>1.2 DevTools</h2><p>La raz√≥n principal de usar Redux es la capacidad que da al programador para comprender c√≥mo el estado de sus variables ha variado en el tiempo. Es decir ¬øC√≥mo hemos llegado hasta aqu√≠?. Esta es claramente una cuesti√≥n de an√°lisis y depuraci√≥n de c√≥digo. Y para ello necesitamos herramientas de desarrollador. Presentamos las <a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en" target="_blank" rel="noopener"><strong>Redux DevTools for Chrome</strong></a>.</p><p>Este es un plugin que se engancha a cualquier soluci√≥n Redux (no s√≥lo NgRx, ni siquiera s√≥lo Angular) y que permite explorar el valor del estado y lo m√°s interesante: la secuencia de acciones que se ha despachado y el efecto que cada una tuvo sobre el valor del estado.</p><p>Para realizar el enganche sirve la l√≠nea que ver√°s tambi√©n en el <code>AppModule</code>. La cual activa la monitorizaci√≥n cuando no estamos en producci√≥n. Normal, esto es un herramienta para el desarrollador, nunca para el usuario.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!environment.production ? StoreDevtoolsModule.instrument() : [],</span><br></pre></td></tr></table></figure><p>Para verlo en funcionamiento tienes que ejecutar y abrir tu app en Chrome. Despu√©s en la pantalla de inspecci√≥n del c√≥digo aparecer√° una pesta√±a al final de todo (m√°s all√° de Network y Application‚Ä¶) llamada Redux. La interfaz es muy intuitiva; no tardar√°s en hacerte con ella. aunque ahora mismo un poco pobre‚Ä¶</p><h2 id="1-3-Router"><a href="#1-3-Router" class="headerlink" title="1.3 Router"></a>1.3 Router</h2><p>Para darle algo de contenido y de paso acercarnos a las capacidades de Redux y NgRx vamos a conectarle el <code>RouterModule</code> de la aplicaci√≥n. Para ello sirve la siguiente l√≠nea que tienes que poner tambi√©n en la importaciones del <code>AppModule</code>.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StoreRouterConnectingModule.forRoot(&#123; routerState: RouterState.Minimal &#125;)</span><br></pre></td></tr></table></figure><p>A partir de este momento cada evento de navegaci√≥n del <em>router</em> va a generar una acci√≥n que <em>NgRx</em> recoger√° y registrar√°. Esas acciones y su impacto en el estado se pueden visualizar con el plugin de Redux. Podr√°s ver los cambios y reproducirlos hacia adelante y atr√°s. Es como viajar en el tiempo dentro de la ejecuci√≥n de app.</p><h1 id="2-Actions"><a href="#2-Actions" class="headerlink" title="2 Actions"></a>2 Actions</h1><p>Hasta el momento ha sido todo muy de infraestructura, pero es hora de que hagamos algo funcional. Un ejemplo ser√≠a agregar a nuestra app un m√≥dulo para la gesti√≥n de medios de pago de un usuario. Algo as√≠:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">As</span> <span class="attr">a:</span> <span class="string">customer,</span></span><br><span class="line">  <span class="string">I</span> <span class="attr">want:</span> <span class="string">to</span> <span class="string">add</span> <span class="string">payment</span> <span class="string">methods</span></span><br><span class="line">  <span class="string">so</span> <span class="attr">that:</span> <span class="string">I</span> <span class="string">can</span> <span class="string">pay</span> <span class="string">with</span> <span class="string">them</span></span><br><span class="line"></span><br><span class="line"><span class="string">As</span> <span class="attr">a:</span> <span class="string">customer,</span></span><br><span class="line">  <span class="string">I</span> <span class="attr">want:</span> <span class="string">to</span> <span class="string">select</span> <span class="string">one</span> <span class="string">as</span> <span class="string">preferred</span></span><br><span class="line">  <span class="string">so</span> <span class="attr">that:</span> <span class="string">I</span> <span class="string">can</span> <span class="string">make</span> <span class="string">fewer</span> <span class="string">clicks</span></span><br><span class="line"></span><br><span class="line"><span class="string">As</span> <span class="attr">a:</span> <span class="string">customer,</span></span><br><span class="line">  <span class="string">I</span> <span class="attr">want:</span> <span class="string">to</span> <span class="string">change</span> <span class="string">de</span> <span class="string">expiration</span> <span class="string">date</span></span><br><span class="line">  <span class="string">so</span> <span class="attr">that:</span> <span class="string">I</span> <span class="string">get</span> <span class="string">my</span> <span class="string">cards</span> <span class="string">up</span> <span class="string">to</span> <span class="string">date</span></span><br></pre></td></tr></table></figure><p>Para ello, y valiendo una vez m√°s de los schematics vamos a agregar una <em>feature</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ng g m payments --project=shop --module=app.module.ts --routing --route=payments</span><br><span class="line">ng g @ngrx/schematics:feature payments/store/paymentMethod --project=shop --module=payments/payments.module.ts --no-flat --no-spec --creators</span><br></pre></td></tr></table></figure><p>Esto habr√° generado un buen mont√≥n de c√≥digo. Pero todo demasiado gen√©rico. Vamos a empezar a adaptarlo a nuestro problema aportando un modelo de datos.</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.model.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> PaymentMethod &#123;</span><br><span class="line">  id: <span class="built_in">string</span>;</span><br><span class="line">  expiration: <span class="built_in">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> PaymentMethods &#123;</span><br><span class="line">  list: PaymentMethod[];</span><br><span class="line">  preferred: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Y ahora s√≠, vamos a por las acciones.</p><h2 id="2-1-Create"><a href="#2-1-Create" class="headerlink" title="2.1 Create"></a>2.1 Create</h2><p>Uno de los par√°metros usados durante la generaci√≥n de la <em>feature</em> fue <code>--creators</code>. Esto le indic√≥ a NgRx que preferimos usar funciones en lugar de clases para definir nuestras acciones. As√≠ que en el fichero de definici√≥n de acciones te encontrar√°s con llamadas a una funci√≥n como esta <code>createAction(&#39;Descripci√≥n de la acci√≥n&#39;, props&lt;{ parametro: Tipo }&gt;() )</code>.<br>Con esto tenemos que cubrir los dos requerimientos de Redux: las acciones han de tener un tipo y una <em>payload</em>.</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.actions.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadPaymentMethods = createAction(</span><br><span class="line">  <span class="string">'[PaymentMethod] Load PaymentMethods'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addPaymentMethod = createAction(</span><br><span class="line">  <span class="string">'[PaymentMethod] Add PaymentMethod'</span>,</span><br><span class="line">  props&lt;&#123; newPaymentMethod: PaymentMethod &#125;&gt;()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> selectPreferredPaymentMethod = createAction(</span><br><span class="line">  <span class="string">'[PaymentMethod] Select preferred PaymentMethod'</span>,</span><br><span class="line">  props&lt;&#123; preferredId: <span class="built_in">string</span> &#125;&gt;()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setExpirationPaymentMethod = createAction(</span><br><span class="line">  <span class="string">'[PaymentMethod] Set Expiration Date on PaymentMethod'</span>,</span><br><span class="line">  props&lt;&#123; updatedPaymentMethod: PaymentMethod &#125;&gt;()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>El c√≥digo puede resultar extra√±o a primera vista; pero es siempre igual y acabas familiarizando muy r√°pido. Esencialmente se trata de dar un nombre a la acci√≥n y luego configurarla. Lo imprescindible va a ser un string que la describa. Es recomendable seguir el convenio con el formato <code>[Origen] Nombre acci√≥n descriptivo</code>.</p><p>El segundo argumento de la funci√≥n <code>creteAction</code> es a su vez otra funci√≥n. La parte interesante de la funci√≥n <code>propos&lt;&gt;()</code> est√° en su tipo gen√©rico. Es ah√≠ d√≥nde definimos el tipo de datos de la <em>payload</em> que puede transportar la acci√≥n.</p><h2 id="2-2-Dispatch"><a href="#2-2-Dispatch" class="headerlink" title="2.2 Dispatch"></a>2.2 Dispatch</h2><p>Definir el cat√°logo de acciones es la primera parte del problema. Ahora nos toca invocarlas, o como se dice en el argot Redux: despacharlas. Para ello voy a crear un servicio auxiliar que encapsule toda la interacci√≥n con NgRx. Es una implementaci√≥n del patr√≥n fachada para unificar y facilitar el trabajo con Redux desde fuera.</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.service.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Store &#125; <span class="keyword">from</span> <span class="string">'@ngrx/store'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> PaymentMethodActions <span class="keyword">from</span> <span class="string">'./payment-method.actions'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; PaymentMethod, PaymentMethods &#125; <span class="keyword">from</span> <span class="string">'./payment-method.model'</span>;</span><br><span class="line"><span class="meta">@Injectable</span>(&#123;</span><br><span class="line">  providedIn: <span class="string">'root'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> PaymentMethodService &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> store: Store&lt;PaymentMethods&gt;</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Y aqu√≠ puedo crear los m√©todos funcionales que despachen las acciones sobre el <em>store</em> de NgRx.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> loadPaymentMethods() &#123;</span><br><span class="line">  <span class="keyword">this</span>.store.dispatch(PaymentMethodActions.loadPaymentMethods());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> addPaymentMethod(newPaymentMethod: PaymentMethod) &#123;</span><br><span class="line">    <span class="keyword">this</span>.store.dispatch(</span><br><span class="line">      PaymentMethodActions.addPaymentMethod(&#123;</span><br><span class="line">        newPaymentMethod: &#123; ...newPaymentMethod &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">public</span> selectPreferredPaymentMethod(preferredId: <span class="built_in">string</span>) &#123;</span><br><span class="line">  <span class="keyword">this</span>.store.dispatch(</span><br><span class="line">    PaymentMethodActions.selectPreferredPaymentMethod(&#123; preferredId &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> setExpirationPaymentMethod(updatedPaymentMethod: PaymentMethod) &#123;</span><br><span class="line">  <span class="keyword">this</span>.store.dispatch(</span><br><span class="line">    PaymentMethodActions.setExpirationPaymentMethod(&#123;</span><br><span class="line">      updatedPaymentMethod: &#123; ...updatedPaymentMethod &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Es necesario enviar siempre un clon de los argumentos para desconectarlos del origen. En Redux queremos tener la fuente √∫nica de la verdad, y eso s√≥lo es posible si los argumentos que recibimos est√°n sellados y aislados del resto del mundo.</p><p>Para una primera aproximaci√≥n, reconozco que es mucho c√≥digo para tan poca funcionalidad. Claro que para quien use esta fachada el mundo es mucho m√°s sencillo. Y por dentro es muy potente y controlable.</p><p><code>apps\shop\src\app\payments\payments.component.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> PaymentsComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> paymentMethodService: PaymentMethodService</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.paymentMethodService.loadPaymentMethods();</span><br><span class="line">    <span class="keyword">const</span> visa: PaymentMethod = &#123;</span><br><span class="line">      id: <span class="string">'1234 7896 3214 6549'</span>,</span><br><span class="line">      expiration: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2020</span>, <span class="number">6</span><span class="number">-1</span>, <span class="number">30</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.paymentMethodService.addPaymentMethod(visa);</span><br><span class="line">    <span class="keyword">this</span>.paymentMethodService.selectPreferredPaymentMethod(visa.id);</span><br><span class="line">    visa.expiration = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2021</span>, <span class="number">12</span><span class="number">-1</span>, <span class="number">31</span>);</span><br><span class="line">    <span class="keyword">this</span>.paymentMethodService.setExpirationPaymentMethod(visa);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-State-reducer"><a href="#3-State-reducer" class="headerlink" title="3 State reducer"></a>3 State reducer</h1><h2 id="3-1-State"><a href="#3-1-State" class="headerlink" title="3.1 State"></a>3.1 State</h2><p>El estado en <em>redux</em> es un objeto tipado a partir de una interfaz, inicialmente llamada <code>State</code> a secas, aunque yo prefiero identificarla como <code>PaymentMethodsState</code>. Tendr√° propiedades para almacenar objetos m√°s o menos complejos. Cada propiedad tendr√° su propio tipo complejo y necesita un estado inicial. Eso es lo que hace este c√≥digo:</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.reducer.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> paymentMethodFeatureKey = <span class="string">'paymentMethod'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> PaymentMethodsState &#123;</span><br><span class="line">  paymentMethods: PaymentMethods;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> initialState: PaymentMethodsState = &#123;</span><br><span class="line">  paymentMethods: &#123; list: [], preferred: <span class="literal">null</span> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="3-2-Create-function"><a href="#3-2-Create-function" class="headerlink" title="3.2 Create function"></a>3.2 Create function</h2><p>Pero todo estado necesita su reductor, y una vez m√°s lo crearemos mediante una funci√≥n. En este caso es la <code>createReducer(state, on(action1, function1) )</code>. Su encarnaci√≥n m√°s b√°sica tiene la siguiente pinta:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> paymentMethodReducer = createReducer(</span><br><span class="line">  initialState,</span><br><span class="line">  on(PaymentMethodActions.loadPaymentMethods, <span class="function"><span class="params">state</span> =&gt;</span> state)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>Lo que hace es definir una serie de <code>hooks</code> para enganchar funciones de mutaci√≥n en respuesta a las acciones despachadas. Empezamos con la acci√≥n <code>loadPaymentMethods</code> y en este caso no por ahora hacemos ninguna mutaci√≥n al estado. Es un reductor transparente e innecesario. Lo pongo para familiarizarnos con la sintaxis.</p><p>Vamos a algo m√°s complejo y √∫til como la acci√≥n <code>addPaymentMethod</code>. Funcionalmente queremos agregar el nuevo m√©todo de pago que viene en su carga al array actual de m√©todos de pago. Nada complejo, ya s√≠ deben ser todas las funciones reductoras.</p><p>Pero, siempre hay un pero, resulta que <strong>una funci√≥n reductora debe ser tambi√©n una funci√≥n pura</strong>. Y esto nos obliga a mutar el estado sin mutar los argumentos; es decir, nos obliga a clonar el estado y sus propiedades antes de cambiarlas.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">on(PaymentMethodActions.addPaymentMethod, <span class="function">(<span class="params">state, &#123; newPaymentMethod &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...state,</span><br><span class="line">    paymentMethods: &#123;</span><br><span class="line">      ...state.paymentMethods,</span><br><span class="line">      list: [...state.paymentMethods.list, newPaymentMethod]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>El proceso de clonado puedes hacerlo con mayor o menor profundidad, pero al menos un clonado superficial del estado es obligatorio. Yo aqu√≠ he optado por clonar incluso el array interno, aunque no sea estrictamente obligatorio.</p><h2 id="3-3-Register-in-Store"><a href="#3-3-Register-in-Store" class="headerlink" title="3.3 Register in Store"></a>3.3 Register in Store</h2><p>El resultado de esta invocaci√≥n a <code>createReducer()</code> se ser√° a su vez otra funci√≥n que yo almacen√© en la contante <code>paymentMethodReducer</code>. Por requerimiento del proceso de empaquetado con <code>webpack</code> que nada tiene que ver con NgRx, estamos obligados a exportar la funci√≥n mediante un <em>wrapper</em> como este:</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.reducer.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state: PaymentMethodsState | <span class="literal">undefined</span>, action: Action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> paymentMethodReducer(state, action);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Hecho esto tenemos ya una funci√≥n reductora que debemos registrar en el <em>store</em>. Lo que hacemos es decirle a NgRx que cuando llegue una acci√≥n de mutado invoque a esta acci√≥n pas√°ndole la propiedad del estado encargada gestionar.</p><p><code>apps\shop\src\app\payments\payments.module.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> fromPaymentMethod <span class="keyword">from</span> <span class="string">'./store/payment-method/payment-method.reducer'</span>;</span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    StoreModule.forFeature(</span><br><span class="line">      fromPaymentMethod.paymentMethodFeatureKey,</span><br><span class="line">      fromPaymentMethod.reducer</span><br><span class="line">    )]</span><br></pre></td></tr></table></figure><p>Normalmente el nombre de dicha propiedad se estable en una constante exportada para evitar fallos de tecleo con consecuencias imprevisibles.</p><h1 id="4-Selectors"><a href="#4-Selectors" class="headerlink" title="4 Selectors"></a>4 Selectors</h1><p>Hasta ahora hemos definido el estado, y creado las acciones que despachamos conta √©l. Y hemos creado las funciones reductoras que lo modifican al recibir las acciones. No es poco, pero es la mitad del camino. Nos queda enterarnos de los cambios que se ha realizado. Y para eso nos ofrecen un concepto muy de base de datos <code>select</code>.</p><h2 id="4-1-Create-selector"><a href="#4-1-Create-selector" class="headerlink" title="4.1 Create selector"></a>4.1 Create selector</h2><p>Los selectores, mejor dicho las funciones selectoras, se crean mediante una funci√≥n factor√≠a igual que hemos visto para las reductoras y las acciones. La diferencia es que aqu√≠ las tenemos que llamar a dos niveles: el de la funcionalidad y el de la propiedad espec√≠fica que nos interesa.</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.selectors.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createFeatureSelector, createSelector &#125; <span class="keyword">from</span> <span class="string">'@ngrx/store'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; paymentMethodFeatureKey, State &#125; <span class="keyword">from</span> <span class="string">'./payment-method.reducer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getPaymentMethodState = createFeatureSelector&lt;State&gt;(</span><br><span class="line">  paymentMethodFeatureKey</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getPaymentMethodsList = createSelector(</span><br><span class="line">  getPaymentMethodState,</span><br><span class="line">  (state: State) =&gt; state.paymentMethods.list</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getPreferredPaymentMethod = createSelector(</span><br><span class="line">  getPaymentMethodState,</span><br><span class="line">  (state: State) =&gt; state.paymentMethods.preferred</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>Podemos tener tantos selectores como queramos. Se aconseja crearlos para cada tema de inter√©s que pueda tener el resto de la aplicaci√≥n. Pueden ser simples vista parciales del estado o complejas transformaciones a gusto del consumidor. NgRx lo hace de forma que optimiza c√°lculos y llamadas as√≠ que nos sugieren que abusemos de ellos y encapsulemos aqu√≠ todo el acceso al valor y a los cambios del estado.</p><h2 id="4-2-Selecting-data"><a href="#4-2-Selecting-data" class="headerlink" title="4.2 Selecting data"></a>4.2 Selecting data</h2><p>Una vez m√°s, si queremos que nuestra aplicaci√≥n se desacople lo m√°s posible de ngRx, debemos llamar a los selectores desde un servicio fachada. As√≠ que a√±adimos al <code>apps\shop\src\app\payments\store\payment-method\payment-method.service.ts</code> un par de nuevos m√©todos p√∫blicos.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> getPaymentMethodsList$(): Observable&lt;PaymentMethod[]&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.store.select(PaymentMethodSelectors.getPaymentMethodsList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> getPreferredPaymentMethod$(): Observable&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.store.select(PaymentMethodSelectors.getPreferredPaymentMethod);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-3-Showing-data"><a href="#4-3-Showing-data" class="headerlink" title="4.3 Showing data"></a>4.3 Showing data</h2><p>Estos m√©todos devuelven observables a los que suscribirse para mostrar los valores cambiantes del estado. Gracias a la fachada anterior el componente consumidor es completamente inconsciente de la existencia de NgRx.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> PaymentsComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line">  <span class="keyword">public</span> paymentMethodsList$: Observable&lt;PaymentMethod[]&gt;;</span><br><span class="line">  <span class="keyword">public</span> preferredPaymentMethod$: Observable&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> paymentMethodService: PaymentMethodService</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.paymentMethodsList$ = <span class="keyword">this</span>.paymentMethodService.getPaymentMethodsList$();</span><br><span class="line">    <span class="keyword">this</span>.preferredPaymentMethod$ = <span class="keyword">this</span>.paymentMethodService.getPreferredPaymentMethod$();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Por supuesto, desde la <em>template</em> lo tratamos como a cualquier otro dato as√≠ncrono.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Payment Methods List:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;&#123; paymentMethodsList$ | async | json &#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Preferred Payment Method:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;&#123; preferredPaymentMethod$ | async | json &#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="5-Effects"><a href="#5-Effects" class="headerlink" title="5 Effects"></a>5 Effects</h1><p>Las funciones reductoras, como ya se ha dicho, deben ser puras. La idea es que puedan ser auditadas, re-ejecutadas y testeadas sin que necesiten servicios externos ni causen efectos colaterales. Y esto es un problema con la cantidad de <strong>ejecuciones as√≠ncronas en las aplicaciones web</strong>. Cualquier tentaci√≥n de lanzar una llamada <em>AJAX</em> dentro de un reductor debe ser eliminada de inmediato.</p><blockquote><p>Dos razones: por un lado en Angular se necesita invocar al <em>httpClient</em> de alguna manera para realizar la llamada <em>AJAX</em>. Y ya que la funci√≥n reductora no pertenece a ninguna clase Angular, no puede haber constructor que reclame la inyecci√≥n de la dependencia a dicho servicio. Tampoco las funciones puras tienen permitido usar nada que no venga entre sus argumentos. Por otra parte las funciones puras han de ser predecibles, y una llamada a un servidor remoto no es en absoluto predecible. Puede pasarle de todo, as√≠ que <strong>los reductores no son pa√≠s para procesos as√≠ncronos</strong>.</p></blockquote><p>La soluci√≥n que proponen <em>NgRX</em> es usar un artificio llamado efecto, porque ser√° encargado de <strong>los efectos secundarios que provocan las las instrucciones as√≠ncronas</strong>. De una forma simplista, diremos que las acciones as√≠ncronas se multiplicar√°n por tres. El comando que genera la llamada, y los dos potenciales eventos con la respuesta correcta o el error.</p><p>Para manejarlo todo incluyen en la librer√≠a el m√≥dulo <code>EffectsModule</code> que ha de registrarse junto al <code>StoreModule</code>. Desde ese momento <em>NgRX</em> activa un sistema de seguimiento que trata las acciones como un stream de <em>RxJS</em> y permite subscribirse a la invocaci√≥n de dichas acciones y tratarlas adecuadamente.</p><h2 id="5-1-Install"><a href="#5-1-Install" class="headerlink" title="5.1 Install"></a>5.1 Install</h2><p>Seg√∫n el proceso que hayas escogido para agregar Ngrx puede que ya tengas los efectos agregados o que tengas que hacerlo manualmente mediante un instrucci√≥n como esta:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng add @ngrx/effects</span><br></pre></td></tr></table></figure><p>En cualquier caso aparecer√° una instrucci√≥n de registro en el m√≥dulo ra√≠z o funcional que lo necesite. Por ejemplo el de <code>PaymentsModule</code> es:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EffectsModule.forFeature([])</span><br></pre></td></tr></table></figure><h2 id="5-2-Efecto-basico"><a href="#5-2-Efecto-basico" class="headerlink" title="5.2 Efecto b√°sico"></a>5.2 Efecto b√°sico</h2><p>En un ejemplo inicial vamos a intentar almacenar y recuperar los m√©todos de pago desde el <em>local storage</em> del navegador. Esta es claramente una actividad de riesgo (y no lo dogo s√≥lo por el evidente peligro de seguridad). Pero el acceso puede fallar o no estar disponible. Y en el mejor de los casos es un recurso externo que nunca podr√≠a ir dentro de una funci√≥n reductora.</p><p>As√≠ que vamos a ver el trabajo necesario para montar esto <em>como Redux manda</em>.</p><h3 id="Acciones"><a href="#Acciones" class="headerlink" title="Acciones"></a>Acciones</h3><p>Para empezar agregamos dos nuevas acciones en respuesta a los potenciales eventos que puedan surgir del acceso al <em>local storage</em></p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.actions.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadPaymentMethods = createAction(</span><br><span class="line">  <span class="string">'[PaymentMethod] Load Payment Methods'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadPaymentMethodsSucess = createAction(</span><br><span class="line">  <span class="string">'[PaymentMethod] Load Payment Methods Success'</span>,</span><br><span class="line">  props&lt;&#123; paymentMethodList: PaymentMethod[] &#125;&gt;()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadPaymentMethodsError = createAction(</span><br><span class="line">  <span class="string">'[PaymentMethod] Load Payment Methods Error'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>Para simplificarlo no estoy reportando nada del error espec√≠fico. La <code>loadPaymentMethodsError</code> servir√° para indicar que el proceso ha fallado. sin m√°s.</p><h3 id="Definicion"><a href="#Definicion" class="headerlink" title="Definici√≥n"></a>Definici√≥n</h3><p>Ahora viene lo bueno. La creaci√≥n de un efecto. Empezamos como siempre usando una funci√≥n factor√≠a : <code>createEffect()</code>. S√≥lo que esta vez va asociada a una propiedad p√∫blica de un servicio de Angular. Y aqu√≠ ya tenemos todos nuestros juguetes disponibles.</p><p>Por ejemplo la inyecci√≥n de dependencias; en el constructor <code>constructor(private actions$: Actions) {}</code> solicitamos como argumento un observable de todas las acciones que se hayan despachado en nuestro <code>store</code>. Ese <em>stream</em> servir√° para escuchar y filtrar las acciones que nos interesen. Despu√©s haremos nuestra operativa con todas las llamadas que hagan falta.</p><p>S√≥lo un requisito. Al terminar hemos de retornar un observable con una nueva acci√≥n que el sistema encauzar√° para ser despachada. Esto obliga a conocer bien los operadores <em>RxJs</em> que est√°n en la base do todo este montaje. De ah√≠ el uso <code>concatMap()</code> y por supuesto del creador observable m√°s b√°sico: <code>of()</code>.</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.effects.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> loadPaymentMethods$ = createEffect(<span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  <span class="keyword">this</span>.actions$.pipe(</span><br><span class="line">    ofType(PaymentMethodActions.loadPaymentMethods),</span><br><span class="line">    concatMap(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> storedList = <span class="built_in">JSON</span>.parse(</span><br><span class="line">          <span class="built_in">window</span>.localStorage.getItem(<span class="keyword">this</span>.storeKey)</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">if</span> (!storedList) &#123;</span><br><span class="line">          storedList = initialState.paymentMethods.list;</span><br><span class="line">          <span class="built_in">window</span>.localStorage.setItem(</span><br><span class="line">            <span class="keyword">this</span>.storeKey,</span><br><span class="line">            <span class="built_in">JSON</span>.stringify(storedList)</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> of(</span><br><span class="line">          PaymentMethodActions.loadPaymentMethodsSucess(&#123;</span><br><span class="line">            paymentMethodList: storedList</span><br><span class="line">          &#125;)</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">return</span> of(PaymentMethodActions.loadPaymentMethodsError);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>T√≥mate tu tiempo para entender este efecto, y recuerda que por raro que te parezca al principio, te acabar√°s acostumbrando muy pronto porque siempre sigue el mismo esquema.</p><h3 id="Reducer-y-Register"><a href="#Reducer-y-Register" class="headerlink" title="Reducer y Register"></a>Reducer y Register</h3><p>Por si te olvidabas, todo este trabajo no altera para nada al estado. Recuerda que s√≥lo las reductoras asociadas a las acciones lo hacen. As√≠ que incrementamos nuestro c√≥digo con nuevos casos para el reductor.</p><p><code>apps\shop\src\app\payments\store\payment-method\payment-method.reducer.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">on(</span><br><span class="line">    PaymentMethodActions.loadPaymentMethodsSucess,</span><br><span class="line">    (state, &#123; paymentMethodList &#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        paymentMethods: &#123; ...state.paymentMethods, list: paymentMethodList &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  ),</span><br><span class="line">  on(PaymentMethodActions.loadPaymentMethodsError, <span class="function"><span class="params">state</span> =&gt;</span> state),</span><br></pre></td></tr></table></figure><p>Y para finalizar registramos la clase que contiene al efecto (como un provider especial) en el m√≥dulo de efectos.</p><p><code>apps\shop\src\app\payments\payments.module.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EffectsModule.forFeature([PaymentMethodEffects])</span><br></pre></td></tr></table></figure><h2 id="5-3-Api-async"><a href="#5-3-Api-async" class="headerlink" title="5.3 Api async"></a>5.3 Api async</h2><p>Una vez familiarizado con la sintaxis de los efectos b√°sicos, es hora de pasar a los que sin duda se utilizan m√°s: los efectos sobre servicios as√≠ncronos. Es decir casi todas las llamadas a un API. Algo muy sencillo podr√≠a ser agregar a nuestra tienda un converso de divisas para saber los precios en distintas monedas.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">As</span> <span class="attr">a:</span> <span class="string">customer,</span></span><br><span class="line">  <span class="string">I</span> <span class="attr">want:</span> <span class="string">to</span> <span class="string">see</span> <span class="string">the</span> <span class="string">current</span> <span class="string">exchange</span> <span class="string">rate</span> <span class="string">in</span> <span class="string">several</span> <span class="string">currencies</span></span><br><span class="line">  <span class="string">so</span> <span class="attr">that:</span> <span class="string">I</span> <span class="string">can</span> <span class="string">decide</span></span><br></pre></td></tr></table></figure><h3 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h3><p>A estas alturas te pido un √∫ltimo esfuerzo para que interpretes el siguiente c√≥digo:</p><p><code>apps\shop\src\app\rates\store\exchange-rate\exchange-rate.actions.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadExchangeRates = createAction(</span><br><span class="line">  <span class="string">'[ExchangeRate] Load ExchangeRates'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadExchangeRatesSuccess = createAction(</span><br><span class="line">  <span class="string">'[ExchangeRate] Load ExchangeRates Success'</span>,</span><br><span class="line">  props&lt;&#123; rates: <span class="built_in">any</span> &#125;&gt;()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loadExchangeRatesError = createAction(</span><br><span class="line">  <span class="string">'[ExchangeRate] Load ExchangeRates Error'</span>,</span><br><span class="line">  props&lt;&#123; rates: <span class="built_in">any</span> &#125;&gt;()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>Efectivamente, para cada llamada usaremos tres acciones. El comando que la inicia y los dos eventos que pueden ocurrir <em>success and error</em>.</p><h3 id="Effect"><a href="#Effect" class="headerlink" title="Effect"></a>Effect</h3><p><code>apps\shop\src\app\rates\store\exchange-rate\exchange-rate.effects.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ExchangeRateEffects &#123;</span><br><span class="line">  <span class="keyword">public</span> loadExchangeRates$ = createEffect(<span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">    <span class="keyword">this</span>.actions$.pipe(</span><br><span class="line">      ofType(ExchangeRateActions.loadExchangeRates),</span><br><span class="line">      concatMap(<span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">        <span class="keyword">this</span>.http.get&lt;<span class="built_in">any</span>&gt;(<span class="string">'https://api.exchangeratesapi.io/latest'</span>).pipe(</span><br><span class="line">          map(<span class="function"><span class="params">res</span> =&gt;</span></span><br><span class="line">            ExchangeRateActions.loadExchangeRatesSuccess(&#123; rates: res.rates &#125;)</span><br><span class="line">          ),</span><br><span class="line">          catchError(<span class="function"><span class="params">err</span> =&gt;</span></span><br><span class="line">            of(ExchangeRateActions.loadExchangeRatesError(&#123; rates: err &#125;))</span><br><span class="line">          )</span><br><span class="line">        )))</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> actions$: Actions, <span class="keyword">private</span> http: HttpClient</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Parad√≥jicamente un efecto que incluya una llamada <em>http</em> es m√°s sencillo, pues la naturaleza as√≠ncrona de <em>Ajax</em> junto con el uso de <em>Observables</em> en <code>httpClient</code> nos dejan medio trabajo hecho.</p><p>Lo que realmente hacemos es encauzar el flujo de acciones <code>pipe(concatMap())</code> hacia un flujo de respuestas <em>http</em> <code>this.http.get()</code>. Pero claro esto es trampa, as√≠ que de nuevo encauzamos la respuesta hacia una acci√≥n <code>pipe(map(res=&gt; actionSuccess(res)))</code>. Cuando la respuesta no llega volvemos a lo que ya sabemos, crear un nuevo observable con <code>of(actionError(err))</code>.</p><p>Aqu√≠ lo dejamos. Soy consciente de que Redux es complejo. Soy consciente de que NgRx a√±ade mucho c√≥digo de infraestructura. Pero tambi√©n te animo a revisar este art√≠culo y practicar con un caso sencillo antes de tomar cualquier decisi√≥n. Incluir NgRx o no hacerlo tiene un alto impacto en el mantenimiento de tu proyecto. No te tires a de cabeza ni lo rechaces de plano.</p><p>Descarga y revisa la aplicaci√≥n de ejemplo. Si la dominas, entonces es que ya tienes los conocimientos para gestionar de manera centralizada, auditable y predecible el estado de tus programas. El patr√≥n Redux lucir√° m√°s cuanto m√°s grande y compleja sea tu aplicaci√≥n.</p><p>Contin√∫a tu formaci√≥n avanzada para crear aplicaciones <a href="../pwa-entre-la-web-y-las-apps-con-angular">PWA, entre la web y las apps con Angular</a> y ver√°s como aprendes a programar con Angular 8.</p><blockquote><p>Aprender, programar, disfrutar, repetir.<br>‚Äì <cite>Saludos, Alberto Basalo</cite></p></blockquote></div><footer class="article-footer"><div class="share-container"></div><a data-url="https://academia-binaria.com/el-patron-redux-con-ngrx-en-angular/" data-id="ck70mab1g000obss300bzw0u4" class="article-share-link"><i class="fa fa-share"></i>Compartir</a><script>!function(n){"undefined"!=typeof __SHARE_BUTTON_BINDED__&&__SHARE_BUTTON_BINDED__||(__SHARE_BUTTON_BINDED__=!0,n("body").on("click",function(){n(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e,a=n(this),o=a.attr("data-url"),i=encodeURIComponent(o),r="article-share-box-"+a.attr("data-id"),s=a.offset();if(n("#"+r).length){if((e=n("#"+r)).hasClass("on"))return void e.removeClass("on")}else{var l=['<div id="'+r+'" class="article-share-box">','<input class="article-share-input" value="'+o+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+i+'" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+i+'" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+i+'" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+i+'" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");e=n(l),n("body").append(e)}n(".article-share-box.on").hide(),e.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){n(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}))}(jQuery)</script></footer></div><nav id="article-nav"><a href="/flujo-reactivo-unidireccional-con-Angular-y-RxJs/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Anterior</strong><div class="article-nav-title">Redux, flujo reactivo unidireccional con Angular y RxJs</div></a><a href="/pwa-entre-la-web-y-las-apps-con-angular/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Siguiente</strong><div class="article-nav-title">PWA, Entre la web y las apps con Angular</div></a></nav><p><a href="https://www.trainingit.es/curso-angular-basico/?promo=angular.builders" target="_blank" rel="noopener">C√≥digo descuento: Curso online de introducci√≥n a Angular üí∏-25‚Ç¨</a></p><hr><p><a href="https://www.trainingit.es/curso-angular-avanzado/?promo=angular.builders" target="_blank" rel="noopener">C√≥digo descuento: Curso online avanzado con Angular üí∏-30‚Ç¨</a></p><a href="https://angular.builders" target="_blank" rel="noopener"><img src="/css/images/angular.builders.png" alt="Angular.Builders"></a><hr></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">Recientes</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/servicios-inyectables-en-Angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-5_inject.png)" alt="Servicios inyectables en Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/servicios-inyectables-en-Angular/" class="title">Servicios inyectables en Angular</a></p><p class="item-date"><time datetime="2020-04-17T08:54:58.000Z" itemprop="datePublished">17-04-2020</time></p></div></li><li><div class="item-thumbnail"><a href="/flujo-de-datos-entre-componentes-angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-4_flow.png)" alt="Flujo de datos entre componentes Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/flujo-de-datos-entre-componentes-angular/" class="title">Flujo de datos entre componentes Angular</a></p><p class="item-date"><time datetime="2020-04-16T14:10:44.000Z" itemprop="datePublished">16-04-2020</time></p></div></li><li><div class="item-thumbnail"><a href="/formularios-tablas-y-modelos-de-datos-en-angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-3_data.png)" alt="Formularios, tablas y modelos de datos en Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/formularios-tablas-y-modelos-de-datos-en-angular/" class="title">Formularios, tablas y modelos de datos en Angular</a></p><p class="item-date"><time datetime="2020-04-15T13:17:37.000Z" itemprop="datePublished">15-04-2020</time></p></div></li><li><div class="item-thumbnail"><a href="/paginas-y-rutas-angular-spa/" class="thumbnail"><span style="background-image:url(/css/images/angular-2_spa.png)" alt="P√°ginas y rutas Angular SPA" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/paginas-y-rutas-angular-spa/" class="title">P√°ginas y rutas Angular SPA</a></p><p class="item-date"><time datetime="2020-04-14T11:41:14.000Z" itemprop="datePublished">14-04-2020</time></p></div></li><li><div class="item-thumbnail"><a href="/base-aplicacion-angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-1_base.png)" alt="Base para una aplicaci√≥n Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/base-aplicacion-angular/" class="title">Base para una aplicaci√≥n Angular</a></p><p class="item-date"><time datetime="2020-03-06T16:57:00.000Z" itemprop="datePublished">06-03-2020</time></p></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Categorias</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/">Angular</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tutorial/">Tutorial</a><span class="category-list-count">20</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Tutorial/Angular/">Angular</a><span class="category-list-count">20</span></li></ul></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Nube de etiquetas</h3><div class="widget tagcloud"><a href="/tag/Angular/" style="font-size:20px">Angular</a> <a href="/tag/Angular2/" style="font-size:18px">Angular2</a> <a href="/tag/Angular7/" style="font-size:10px">Angular7</a> <a href="/tag/Angular8/" style="font-size:17px">Angular8</a> <a href="/tag/Angular9/" style="font-size:14px">Angular9</a> <a href="/tag/AngularJS/" style="font-size:10px">AngularJS</a> <a href="/tag/Avanzado/" style="font-size:15px">Avanzado</a> <a href="/tag/BackEnd/" style="font-size:10px">BackEnd</a> <a href="/tag/CLI/" style="font-size:11px">CLI</a> <a href="/tag/ChangeDetection/" style="font-size:10px">ChangeDetection</a> <a href="/tag/Components/" style="font-size:10px">Components</a> <a href="/tag/Cypress/" style="font-size:10px">Cypress</a> <a href="/tag/DI/" style="font-size:10px">DI</a> <a href="/tag/Elements/" style="font-size:10px">Elements</a> <a href="/tag/Forms/" style="font-size:10px">Forms</a> <a href="/tag/FrontEnd/" style="font-size:10px">FrontEnd</a> <a href="/tag/Introduccion/" style="font-size:16px">Introducci√≥n</a> <a href="/tag/Ivy/" style="font-size:10px">Ivy</a> <a href="/tag/Jest/" style="font-size:10px">Jest</a> <a href="/tag/MongoDB/" style="font-size:10px">MongoDB</a> <a href="/tag/NgRx/" style="font-size:10px">NgRx</a> <a href="/tag/NodeJS/" style="font-size:13px">NodeJS</a> <a href="/tag/Nx/" style="font-size:11px">Nx</a> <a href="/tag/Observables/" style="font-size:13px">Observables</a> <a href="/tag/Opinion/" style="font-size:12px">Opini√≥n</a> <a href="/tag/PWA/" style="font-size:10px">PWA</a> <a href="/tag/Redux/" style="font-size:11px">Redux</a> <a href="/tag/Routing/" style="font-size:10px">Routing</a> <a href="/tag/RxJS/" style="font-size:10px">RxJS</a> <a href="/tag/RxJs/" style="font-size:10px">RxJs</a> <a href="/tag/SPA/" style="font-size:10px">SPA</a> <a href="/tag/SSR/" style="font-size:10px">SSR</a> <a href="/tag/Servicios/" style="font-size:10px">Servicios</a> <a href="/tag/Template/" style="font-size:10px">Template</a> <a href="/tag/Test/" style="font-size:10px">Test</a> <a href="/tag/Tutorial/" style="font-size:19px">Tutorial</a> <a href="/tag/TypeScript/" style="font-size:10px">TypeScript</a> <a href="/tag/Universal/" style="font-size:10px">Universal</a> <a href="/tag/WebComponents/" style="font-size:10px">WebComponents</a> <a href="/tag/http/" style="font-size:11px">http</a> <a href="/tag/i18n/" style="font-size:10px">i18n</a> <a href="/tag/material/" style="font-size:10px">material</a> <a href="/tag/reactiveForms/" style="font-size:10px">reactiveForms</a></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">Links</h3><div class="widget"><ul><li><a href="https://www.trainingit.es/curso-angular-basico/?promo=angular.builders" target="_blank" rel="noopener">Curso_Intro</a></li><li><a href="https://www.trainingit.es/curso-angular-avanzado/?promo=angular.builders" target="_blank" rel="noopener">Curso_Avanzado</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Archivos</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">abril 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">marzo 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">febrero 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">octubre 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">septiembre 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">marzo 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">febrero 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">marzo 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">mayo 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">abril 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">marzo 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">enero 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">agosto 2015</a><span class="archive-list-count">1</span></li></ul></div></div><div id="toTop" class="fa fa-angle-up"></div><div><a href="https://angular.builders" target="_blank" rel="noopener" style="align-content:center"><img src="/css/images/angular.builders.png" width="100%" height="auto" alt="Angular.Builders"></a></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2020 Developed by <a target="_blank" href="http://agorabinaria.com">√Ågora Binaria</a>.</div></div></footer><script src="/js/main.js"></script><script src="//load.sumome.com/" data-sumo-site-id="24f3eb649e85fa1f7db20b7fa344f42f381f65f8f86f7028766c55d313e73eb5" async></script></div></body>